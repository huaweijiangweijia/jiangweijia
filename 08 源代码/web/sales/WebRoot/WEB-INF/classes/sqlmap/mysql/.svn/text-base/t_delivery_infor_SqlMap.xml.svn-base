<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="t_delivery_infor">
  <resultMap class="com.tl.resource.dao.pojo.TDeliveryInfor" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    <result column="id" jdbcType="VARCHAR" property="id" />
    <result column="contract_infor_id" jdbcType="VARCHAR" property="contractInforId" />
    <result column="delivery_code" jdbcType="VARCHAR" property="deliveryCode" />
    <result column="contract_code" jdbcType="VARCHAR" property="contractCode" />
    <result column="customer_code" jdbcType="VARCHAR" property="customerCode" />
    <result column="customer_name" jdbcType="VARCHAR" property="customerName" />
    <result column="delivery_date" jdbcType="VARCHAR" property="deliveryDate" />
    <result column="contact_person" jdbcType="VARCHAR" property="contactPerson" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="accept_person" jdbcType="VARCHAR" property="acceptPerson" />
    <result column="accept_date" jdbcType="VARCHAR" property="acceptDate" />
    <result column="memo" jdbcType="VARCHAR" property="memo" />
    <result column="edit_date" jdbcType="TIMESTAMP" property="editDate" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="user_name" jdbcType="VARCHAR" property="userName" />
    <result column="delivery_type" jdbcType="INTEGER" property="deliveryType" />
    <result column="quotation_code" jdbcType="VARCHAR" property="quotationCode" />
    <result column="quotation_id" jdbcType="VARCHAR" property="quotationId" />
    <result column="customer_fax" jdbcType="VARCHAR" property="customerFax" />
    <result column="customer_phone" jdbcType="VARCHAR" property="customerPhone" />
    <result column="cus_contact_person" jdbcType="VARCHAR" property="cusContactPerson" />
  </resultMap>
<resultMap id="result" class="com.tl.resource.dao.pojo.TDeliveryInfor" extends="ibatorgenerated_BaseResultMap">
  <result column="file_count" jdbcType="INTEGER" property="fileCount" />
</resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" parameterClass="com.tl.resource.dao.pojo.TDeliveryInforExample" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    select id, contract_infor_id, delivery_code, contract_code, customer_code, customer_name,
      delivery_date, contact_person, status, accept_person, accept_date, memo, edit_date, user_id,
      user_name, delivery_type, quotation_code, quotation_id,customer_fax,customer_phone,cus_contact_person
    from t_delivery_infor
    <isParameterPresent>
      <include refid="t_delivery_infor.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TDeliveryInfor" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    select id, contract_infor_id, delivery_code, contract_code, customer_code, customer_name,
      delivery_date, contact_person, status, accept_person, accept_date, memo, edit_date, user_id,
      user_name, delivery_type, quotation_code, quotation_id,customer_fax,customer_phone,cus_contact_person
    from t_delivery_infor
    where id = #id:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TDeliveryInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    delete from t_delivery_infor
    where id = #id:VARCHAR#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.tl.resource.dao.pojo.TDeliveryInforExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    delete from t_delivery_infor
    <include refid="t_delivery_infor.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.tl.resource.dao.pojo.TDeliveryInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    insert into t_delivery_infor (id, contract_infor_id, delivery_code, contract_code,
      customer_code, customer_name, delivery_date, contact_person, status, accept_person,
      accept_date, memo, edit_date, user_id, user_name, delivery_type, quotation_code, quotation_id,customer_fax,customer_phone,cus_contact_person)
    values (#id:VARCHAR#, #contractInforId:VARCHAR#, #deliveryCode:VARCHAR#, #contractCode:VARCHAR#,
      #customerCode:VARCHAR#, #customerName:VARCHAR#, #deliveryDate:VARCHAR#,
      #contactPerson:VARCHAR#, #status:INTEGER#, #acceptPerson:VARCHAR#, #acceptDate:VARCHAR#,
      #memo:VARCHAR#, #editDate:TIMESTAMP#, #userId:VARCHAR#, #userName:VARCHAR#,
      #deliveryType:INTEGER#, #quotationCode:VARCHAR#, #quotationId:VARCHAR#,#customerFax:VARCHAR#,#customerPhone:VARCHAR#,#cusContactPerson:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.tl.resource.dao.pojo.TDeliveryInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    insert into t_delivery_infor
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        id
      </isNotNull>
      <isNotNull prepend="," property="contractInforId">
        contract_infor_id
      </isNotNull>
      <isNotNull prepend="," property="deliveryCode">
        delivery_code
      </isNotNull>
      <isNotNull prepend="," property="contractCode">
        contract_code
      </isNotNull>
      <isNotNull prepend="," property="customerCode">
        customer_code
      </isNotNull>
      <isNotNull prepend="," property="customerName">
        customer_name
      </isNotNull>
      <isNotNull prepend="," property="deliveryDate">
        delivery_date
      </isNotNull>
      <isNotNull prepend="," property="contactPerson">
        contact_person
      </isNotNull>
      <isNotNull prepend="," property="status">
        status
      </isNotNull>
      <isNotNull prepend="," property="acceptPerson">
        accept_person
      </isNotNull>
      <isNotNull prepend="," property="acceptDate">
        accept_date
      </isNotNull>
      <isNotNull prepend="," property="memo">
        memo
      </isNotNull>
      <isNotNull prepend="," property="editDate">
        edit_date
      </isNotNull>
      <isNotNull prepend="," property="userId">
        user_id
      </isNotNull>
      <isNotNull prepend="," property="userName">
        user_name
      </isNotNull>
      <isNotNull prepend="," property="deliveryType">
        delivery_type
      </isNotNull>
      <isNotNull prepend="," property="quotationCode">
        quotation_code
      </isNotNull>
      <isNotNull prepend="," property="quotationId">
        quotation_id
      </isNotNull>
	  <isNotNull prepend="," property="customerFax">
        customer_fax
      </isNotNull>
	  <isNotNull prepend="," property="customerPhone">
        customer_phone
      </isNotNull>
	  <isNotNull prepend="," property="cusContactPerson">
        cus_contact_person
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        #id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contractInforId">
        #contractInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deliveryCode">
        #deliveryCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contractCode">
        #contractCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerCode">
        #customerCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerName">
        #customerName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deliveryDate">
        #deliveryDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contactPerson">
        #contactPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status">
        #status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="acceptPerson">
        #acceptPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="acceptDate">
        #acceptDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="memo">
        #memo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="editDate">
        #editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        #userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userName">
        #userName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deliveryType">
        #deliveryType:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="quotationCode">
        #quotationCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="quotationId">
        #quotationId:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="customerFax">
        #customer_fax:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="customerPhone">
        #customer_phone:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="cusContactPerson">
        #cus_contact_person:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.tl.resource.dao.pojo.TDeliveryInforExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    select count(*) from t_delivery_infor
    <include refid="t_delivery_infor.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    update t_delivery_infor
    <dynamic prepend="set">
      <isNotNull prepend="," property="record.id">
        id = #record.id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.contractInforId">
        contract_infor_id = #record.contractInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.deliveryCode">
        delivery_code = #record.deliveryCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.contractCode">
        contract_code = #record.contractCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.customerCode">
        customer_code = #record.customerCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.customerName">
        customer_name = #record.customerName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.deliveryDate">
        delivery_date = #record.deliveryDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.contactPerson">
        contact_person = #record.contactPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.status">
        status = #record.status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.acceptPerson">
        accept_person = #record.acceptPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.acceptDate">
        accept_date = #record.acceptDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.memo">
        memo = #record.memo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.editDate">
        edit_date = #record.editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.userId">
        user_id = #record.userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.userName">
        user_name = #record.userName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.deliveryType">
        delivery_type = #record.deliveryType:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.quotationCode">
        quotation_code = #record.quotationCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.quotationId">
        quotation_id = #record.quotationId:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.customerFax">
        customer_fax = #record.customerFax:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.customerPhone">
        customer_phone = #record.customerPhone:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.cusContactPerson">
        cus_contact_person = #record.cusContactPerson:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent>
      <include refid="t_delivery_infor.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    update t_delivery_infor
    set id = #record.id:VARCHAR#,
      contract_infor_id = #record.contractInforId:VARCHAR#,
      delivery_code = #record.deliveryCode:VARCHAR#,
      contract_code = #record.contractCode:VARCHAR#,
      customer_code = #record.customerCode:VARCHAR#,
      customer_name = #record.customerName:VARCHAR#,
      delivery_date = #record.deliveryDate:VARCHAR#,
      contact_person = #record.contactPerson:VARCHAR#,
      status = #record.status:INTEGER#,
      accept_person = #record.acceptPerson:VARCHAR#,
      accept_date = #record.acceptDate:VARCHAR#,
      memo = #record.memo:VARCHAR#,
      edit_date = #record.editDate:TIMESTAMP#,
      user_id = #record.userId:VARCHAR#,
      user_name = #record.userName:VARCHAR#,
      delivery_type = #record.deliveryType:INTEGER#,
      quotation_code = #record.quotationCode:VARCHAR#,
      quotation_id = #record.quotationId:VARCHAR#,
	  customer_fax = #record.customerFax:VARCHAR#,
	  customer_phone = #record.customerPhone:VARCHAR#,
	  cus_contact_person = #record.cusContactPerson:VARCHAR#
    <isParameterPresent>
      <include refid="t_delivery_infor.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.tl.resource.dao.pojo.TDeliveryInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    update t_delivery_infor
    <dynamic prepend="set">
      <isNotNull prepend="," property="contractInforId">
        contract_infor_id = #contractInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deliveryCode">
        delivery_code = #deliveryCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contractCode">
        contract_code = #contractCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerCode">
        customer_code = #customerCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerName">
        customer_name = #customerName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deliveryDate">
        delivery_date = #deliveryDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contactPerson">
        contact_person = #contactPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status">
        status = #status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="acceptPerson">
        accept_person = #acceptPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="acceptDate">
        accept_date = #acceptDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="memo">
        memo = #memo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="editDate">
        edit_date = #editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        user_id = #userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userName">
        user_name = #userName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="deliveryType">
        delivery_type = #deliveryType:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="quotationCode">
        quotation_code = #quotationCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="quotationId">
        quotation_id = #quotationId:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="customerFax">
        customer_fax = #customerFax:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="customerPhone">
        customer_phone = #customerPhone:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="cusContactPerson">
        cus_contact_person = #cusContactPerson:VARCHAR#
      </isNotNull>
    </dynamic>
    where id = #id:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TDeliveryInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Dec 10 14:55:15 CST 2009.
    -->
    update t_delivery_infor
    set contract_infor_id = #contractInforId:VARCHAR#,
      delivery_code = #deliveryCode:VARCHAR#,
      contract_code = #contractCode:VARCHAR#,
      customer_code = #customerCode:VARCHAR#,
      customer_name = #customerName:VARCHAR#,
      delivery_date = #deliveryDate:VARCHAR#,
      contact_person = #contactPerson:VARCHAR#,
      status = #status:INTEGER#,
      accept_person = #acceptPerson:VARCHAR#,
      accept_date = #acceptDate:VARCHAR#,
      memo = #memo:VARCHAR#,
      edit_date = #editDate:TIMESTAMP#,
      user_id = #userId:VARCHAR#,
      user_name = #userName:VARCHAR#,
      delivery_type = #deliveryType:INTEGER#,
      quotation_code = #quotationCode:VARCHAR#,
      quotation_id = #quotationId:VARCHAR#,
	  customer_fax = #customerFax:VARCHAR#,
	  customer_phone = #customerPhone:VARCHAR#,
	  cus_contact_person = #cusContactPerson:VARCHAR#
    where id = #id:VARCHAR#
  </update>
  <!-- 根据条件查询交货单count -->
    <select id="getDeliveryListCount" parameterClass="java.util.Map" resultClass="java.lang.Integer">
    SELECT count(DISTINCT tci.id)
    from t_delivery_infor tci,t_resource_purview pur
    where tci.user_id = pur.target_user_id
    AND pur.resource_type = 6
    and pur.user_id = #currentUserId#
    <isNotEmpty property="status" prepend="and">
      <![CDATA[  tci.status = $status$ ]]>
    </isNotEmpty>
      <isNotEmpty property="contractCode" prepend="and">
      <![CDATA[ tci.contract_code like '%$contractCode$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="customerName" prepend="and">
      <![CDATA[ tci.customer_name like '%$customerName$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="startTime" prepend="and">
      <![CDATA[ DATE_FORMAT(tci.edit_date,'%Y-%m-%d') >= '$startTime$' ]]>
    </isNotEmpty>
     <isNotEmpty property="endTime" prepend="and">
      <![CDATA[ DATE_FORMAT(tci.edit_date,'%Y-%m-%d') <= '$endTime$' ]]>
    </isNotEmpty>
    <isNotEmpty property="deliveryCode" prepend="and">
      <![CDATA[ delivery_code like '%$deliveryCode$%' ]]>
    </isNotEmpty>
    <isEqual property="contractIdIsNull" compareValue="1" prepend="and"> 
    	<![CDATA[ tci.contract_infor_id is null ]]>
    </isEqual>
    <isEqual property="contractIdIsNull" compareValue="0" prepend="and"> 
    	<![CDATA[ tci.contract_infor_id is not null ]]>
    </isEqual>
    <isNotNull prepend="and" property="deliveryType">
        tci.delivery_type = #deliveryType:INTEGER#
    </isNotNull>
  </select>
  <!-- 根据条件查询交货单列表 -->
    <select id="getDeliverysList" parameterClass="java.util.Map" resultClass="java.util.List" resultMap="result">
    SELECT tci.id, tci.contract_infor_id, tci.delivery_code, tci.contract_code, tci.customer_code, tci.customer_name,
      tci.delivery_date, tci.contact_person, tci.status, tci.accept_person, tci.accept_date, tci.memo, tci.edit_date, tci.user_id,
      tci.user_name,tci.delivery_type, tci.quotation_code, tci.quotation_id,tci.customer_fax,tci.customer_phone,cus_contact_person,
      (SELECT COUNT(*) FROM t_accessories ac WHERE ac.business_id = tci.id) file_count
    from t_delivery_infor tci,t_resource_purview pur
    where tci.user_id = pur.target_user_id
    AND pur.resource_type = 6
     and pur.user_id = #currentUserId#
    <isNotEmpty property="status" prepend="and">
      <![CDATA[  tci.status = $status$ ]]>
    </isNotEmpty>
    <isNotEmpty property="contractCode" prepend="and">
      <![CDATA[ tci.contract_code like '%$contractCode$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="quotationCode" prepend="and">
      <![CDATA[ tci.quotation_code like '%$quotationCode$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="customerName" prepend="and">
      <![CDATA[ tci.customer_name like '%$customerName$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="startTime" prepend="and">
      <![CDATA[ DATE_FORMAT(tci.edit_date,'%Y-%m-%d') >= '$startTime$' ]]>
    </isNotEmpty>
     <isNotEmpty property="endTime" prepend="and">
      <![CDATA[ DATE_FORMAT(tci.edit_date,'%Y-%m-%d') <= '$endTime$' ]]>
    </isNotEmpty>
    <isNotEmpty property="deliveryCode" prepend="and">
      <![CDATA[ tci.delivery_code like '%$deliveryCode$%' ]]>
    </isNotEmpty>
    <isEqual property="contractIdIsNull" compareValue="1" prepend="and"> 
    	<![CDATA[ tci.contract_infor_id is null ]]>
    </isEqual>
    <isEqual property="contractIdIsNull" compareValue="0" prepend="and"> 
    	<![CDATA[ tci.contract_infor_id is not null ]]>
    </isEqual>
    <isNotNull prepend="and" property="deliveryType">
        tci.delivery_type = #deliveryType:INTEGER#
    </isNotNull>
    <isNotNull  property="dir">
        order by $sort$ $dir$
    </isNotNull>
    <isNull  property="dir">
    	order by edit_date desc
    </isNull>
    <isNotEmpty property="startIndex" >
        limit $startIndex$,$pageSize$
    </isNotEmpty>
  </select>
</sqlMap>