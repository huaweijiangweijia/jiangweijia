<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="t_product_brand" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.tl.resource.dao.pojo.TProductBrand" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    <result column="id" property="id" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="source_id" property="sourceId" jdbcType="VARCHAR" />
    <result column="source_name" property="sourceName" jdbcType="VARCHAR" />
    <result column="order_price_run_date" property="orderPriceRunDate" jdbcType="VARCHAR" />
    <result column="sale_price_run_date" property="salePriceRunDate" jdbcType="VARCHAR" />
    <result column="backup_name_first" property="backupNameFirst" jdbcType="VARCHAR" />
    <result column="backup_name_sec" property="backupNameSec" jdbcType="VARCHAR" />
  </resultMap>
  
   <resultMap id="runDate" class="com.tl.resource.dao.pojo.TProductBrand" >
       <result column="order_price_run_date" property="orderPriceRunDate" jdbcType="VARCHAR" />
  </resultMap>
  
  
  <sql id="ibatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  
  <update id="updateToolsByBrand" parameterClass="Map">
    update t_product_tools_infor
    set product_brand=#newBrand#
    where product_brand=#oldBrand#
  </update>
  
  <!-- 根据品牌 及 来源(ftl) -->
  <select id="getBrand4import" parameterClass="com.tl.resource.business.dto.TreeDto" resultClass="List" resultMap="ibatorgenerated_BaseResultMap">
    <![CDATA[
      select * from t_product_brand t where t.name = #productBrand#
    ]]>
  </select>
  
  <!-- 根据品牌模糊查询(ftl) -->
  <select id="getProBrandByName" parameterClass="String" resultClass="List" resultMap="ibatorgenerated_BaseResultMap">
    <![CDATA[
      select * from t_product_brand t where t.name = #value#
    ]]>
  </select>
  
  <!-- 根据来源模糊查询品牌(ftl) -->
  <select id="getProBrandBySource" parameterClass="String" resultClass="List" resultMap="ibatorgenerated_BaseResultMap">
    <![CDATA[
      select * from t_product_brand t
    ]]>
  </select>
  
  <!-- 获取品牌信息(2009-12-22) -->
  <select id="getProductBrandByPage" parameterClass="java.util.Map" resultClass="java.util.List" resultMap="ibatorgenerated_BaseResultMap">
    <![CDATA[
      select * from t_product_brand t where 1=1
      ]]>
    <isNotEmpty property="name" prepend="and">
      <![CDATA[ name like '%$name$%' or backup_name_first like '%$name$%' or backup_name_sec like '%$name$%']]>
    </isNotEmpty>
     <isNotEmpty property="sourceName" prepend="and">
      <![CDATA[ source_name like '%$sourceName$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="orderPriceRunDate" prepend="and">
       <![CDATA[ DATE_FORMAT(order_price_run_date,'%Y-%m-%d') = '$orderPriceRunDate$' ]]>
    </isNotEmpty>
    <isNotEmpty property="salePriceRunDate" prepend="and">
      <![CDATA[ DATE_FORMAT(sale_price_run_date,'%Y-%m-%d') = '$salePriceRunDate$' ]]>
    </isNotEmpty>
    <isNotEmpty property="sort" >
      <![CDATA[
	     order by $sort$ $dir$
	  ]]>
    </isNotEmpty>
    <![CDATA[
      limit #start#, #limit# 
    ]]>
  </select>
  
   <!-- 获取所有品牌信息 -->
  <select id="getProductBrankList" parameterClass="java.util.Map" resultClass="java.util.List" resultMap="ibatorgenerated_BaseResultMap">
    <![CDATA[
      select * from t_product_brand t 
    ]]>
  </select>
  
  
  
  <!-- 获取品牌执行时间 -->
  <select id="getRunData" parameterClass="java.util.Map" resultClass="java.util.List" resultMap="runDate">
    <![CDATA[
   select distinct  t.sale_price_date as order_price_run_date
    	from    t_sales_price_history  t      
		join t_product_tools_infor  tp  on tp.id = t.product_tool_infor_id
    	where   t.parent_id = 'root' and tp.product_brand = #proBrandName#
		     ]]>
  </select>
  
  <!-- 获取品牌信息总数(2009-12-22) -->
  <select id="getProductBrandTotal" parameterClass="Map" resultClass="Integer">
    <![CDATA[
      select count(*) from t_product_brand t where 1=1    
    ]]>
      <isNotEmpty property="name" prepend="and">
      <![CDATA[ name like '%$name$%' or backup_name_first like '%$name$%' or backup_name_sec like '%$name$%']]>
    </isNotEmpty>
     <isNotEmpty property="sourceName" prepend="and">
      <![CDATA[ source_name like '%$sourceName$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="orderPriceRunDate" prepend="and">
      <![CDATA[ DATE_FORMAT(backup_name_first,'%Y-%m-%d') = '$orderPriceRunDate$' ]]>
    </isNotEmpty>
    <isNotEmpty property="salePriceRunDate" prepend="and">
      <![CDATA[ DATE_FORMAT(backup_name_sec,'%Y-%m-%d') = '$salePriceRunDate$' ]]>
    </isNotEmpty>

  </select>
  
  <select id="ibatorgenerated_selectByExample" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.tl.resource.dao.pojo.TProductBrandExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    select id, name, source_id, source_name, order_price_run_date, sale_price_run_date,backup_name_first,backup_name_sec
    from t_product_brand
    <isParameterPresent >
      <include refid="t_product_brand.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.tl.resource.dao.pojo.TProductBrand" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    select id, name, source_id, source_name, order_price_run_date, sale_price_run_date,backup_name_first,backup_name_sec
    from t_product_brand
    where id = #id:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TProductBrand" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    delete from t_product_brand
    where id = #id:VARCHAR#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.tl.resource.dao.pojo.TProductBrandExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    delete from t_product_brand
    <include refid="t_product_brand.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.tl.resource.dao.pojo.TProductBrand" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    insert into t_product_brand (id, name, source_id, source_name, order_price_run_date, sale_price_run_date,backup_name_first,backup_name_sec)
    values (#id:VARCHAR#, #name:VARCHAR#, #sourceId:VARCHAR#, #sourceName:VARCHAR#, #orderPriceRunDate:VARCHAR#
    ,#salePriceRunDate:VARCHAR# ,#backupNameFirst:VARCHAR# ,#backupNameSec:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.tl.resource.dao.pojo.TProductBrand" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    insert into t_product_brand
    <dynamic prepend="(" >
      <isNotNull prepend="," property="id" >
        id
      </isNotNull>
      <isNotNull prepend="," property="name" >
        name
      </isNotNull>
      <isNotNull prepend="," property="sourceId" >
        source_id
      </isNotNull>
      <isNotNull prepend="," property="sourceName" >
        source_name
      </isNotNull>
      <isNotNull prepend="," property="orderPriceRunDate" >
        order_price_run_date
      </isNotNull>
      <isNotNull prepend="," property="salePriceRunDate" >
        sale_price_run_date
      </isNotNull>
       <isNotNull prepend="," property="backupNameFirst" >
        backup_name_first
      </isNotNull>
       <isNotNull prepend="," property="backupNameSec" >
        backup_name_sec
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="id" >
        #id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="name" >
        #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sourceId" >
        #sourceId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sourceName" >
        #sourceName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderPriceRunDate" >
        #orderPriceRunDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="salePriceRunDate" >
        #salePriceRunDate:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="backupNameFirst" >
      #backupNameFirst:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="backupNameSec" >
       #backupNameSec:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.tl.resource.dao.pojo.TProductBrandExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    select count(*) from t_product_brand
    <include refid="t_product_brand.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    update t_product_brand
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.id" >
        id = #record.id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.name" >
        name = #record.name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sourceId" >
        source_id = #record.sourceId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.sourceName" >
        source_name = #record.sourceName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.orderPriceRunDate" >
        order_price_run_date = #record.orderPriceRunDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.salePriceRunDate" >
        sale_price_run_date = #record.salePriceRunDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.backupNameFirst" >
        backup_name_first = #record.backupNameFirst:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.backupNameSec" >
        backup_name_sec = #record.backupNameSec:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="t_product_brand.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    update t_product_brand
    set id = #record.id:VARCHAR#,
      name = #record.name:VARCHAR#,
      source_id = #record.sourceId:VARCHAR#,
      source_name = #record.sourceName:VARCHAR#,
      order_price_run_date = #record.orderPriceRunDate:VARCHAR#,
      sale_price_run_date = #record.salePriceRunDate:VARCHAR#,
      backup_name_first = #record.backupNameFirst:VARCHAR#,
      backup_name_sec = #record.backupNameSec:VARCHAR#
    <isParameterPresent >
      <include refid="t_product_brand.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.tl.resource.dao.pojo.TProductBrand" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    update t_product_brand
    <dynamic prepend="set" >
      <isNotNull prepend="," property="name" >
        name = #name:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sourceId" >
        source_id = #sourceId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="sourceName" >
        source_name = #sourceName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderPriceRunDate" >
        order_price_run_date = #orderPriceRunDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderPriceRunDate" >
        sale_price_run_date = #salePriceRunDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="backupNameFirst" >
        backup_name_first = #backupNameFirst:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="backupNameSec" >
        backup_name_sec = #backupNameSec:VARCHAR#
      </isNotNull>
    </dynamic>
    where id = #id:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TProductBrand" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Wed Nov 25 18:10:59 CST 2009.
    -->
    update t_product_brand
    set name = #name:VARCHAR#, source_id = #sourceId:VARCHAR#, source_name = #sourceName:VARCHAR#, 
    order_price_run_date = #orderPriceRunDate:VARCHAR#,sale_price_run_date = #salePriceRunDate:VARCHAR#,
    backup_name_first = #backupNameFirst:VARCHAR#, backup_name_sec = #backupNameSec:VARCHAR#
    where id = #id:VARCHAR#
  </update>
</sqlMap>