<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="t_product_tools_infor">
  
  <typeAlias alias="pageInfo" type="com.tl.common.util.PaginationSupport"/>
  
  <resultMap class="com.tl.resource.dao.pojo.TProductToolsInfor" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    <result column="id" jdbcType="VARCHAR" property="id" />
    <result column="product_sort_id" jdbcType="VARCHAR" property="productSortId" />
    <result column="parent_id" jdbcType="VARCHAR" property="parentId" />
    <result column="leaf" jdbcType="DECIMAL" property="leaf" />
    <result column="brand_code" jdbcType="VARCHAR" property="brandCode" />
    <result column="product_code" jdbcType="VARCHAR" property="productCode" />
    <result column="product_name" jdbcType="VARCHAR" property="productName" />
    <result column="product_unit" jdbcType="VARCHAR" property="productUnit" />
    <result column="product_sort_code" jdbcType="VARCHAR" property="productSortCode" />
    <result column="product_brand" jdbcType="VARCHAR" property="productBrand" />
    <result column="product_source" jdbcType="VARCHAR" property="productSource" />
    <result column="slave_file" jdbcType="VARCHAR" property="slaveFile" />
    <result column="memo" jdbcType="VARCHAR" property="memo" />
    <result column="stock_price" jdbcType="DECIMAL" property="stockPrice" />
    <result column="sale_price" jdbcType="DECIMAL" property="salePrice" />
    <result column="stock_price_date" jdbcType="TIMESTAMP" property="stockPriceDate" />
    <result column="sale_price_date" jdbcType="TIMESTAMP" property="salePriceDate" />
    
    <result column="amount" jdbcType="DECIMAL" property="amount" />
    <result column="brand_code_history" jdbcType="VARCHAR" property="brandCodeHistory" />
    <result column="compare_brand_code" jdbcType="VARCHAR" property="compareBrandCode" />
  </resultMap>
  
  <select id="findSupToolsList" parameterClass="java.util.Map" resultClass="java.util.List" resultMap="ibatorgenerated_BaseResultMap">
      select pti.* from t_product_tools_infor pti,t_suppliers_brand sb
		where pti.product_brand = sb.brand
           and sb.t_suppliers_id = #supplierId#
        <isNotEmpty property="brandCode" prepend="and">
           pti.brand_code like '%$brandCode$%'
        </isNotEmpty>
		limit #startIndex#, #pageSize# 
  </select>
  <select id="findSupToolsListCount" parameterClass="java.util.Map" resultClass="java.lang.Integer">
      select count(*) from t_product_tools_infor pti,t_suppliers_brand sb
		where pti.product_brand = sb.brand
           and sb.t_suppliers_id = #supplierId#
		<isNotEmpty property="brandCode" prepend="and">
           pti.brand_code like '%$brandCode$%'
        </isNotEmpty>
  </select>
  
  <select id="getProToolsByPage" parameterClass="pageInfo" resultClass="java.util.List" resultMap="ibatorgenerated_BaseResultMap">
    <![CDATA[
      select * from t_product_tools_infor limit #startIndex#, #pageSize# 
    ]]>
  </select>
  
  <select id="getProToolsByParId" parameterClass="java.lang.String" resultClass="java.util.List" resultMap="ibatorgenerated_BaseResultMap">
    <![CDATA[
      select * from t_product_tools_infor pro where pro.parent_id=#value#
    ]]>
  </select>
  
  <select id="getProToolsById" parameterClass="java.lang.String" resultClass="com.tl.resource.dao.pojo.TProductToolsInfor" resultMap="ibatorgenerated_BaseResultMap">
    <![CDATA[
      select * from t_product_tools_infor pro where pro.id=#value#
    ]]>
  </select>
  
  <sql id="ibatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" parameterClass="com.tl.resource.dao.pojo.TProductToolsInforExample" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    select id, product_sort_id, parent_id, leaf, brand_code, product_code, product_name,
      product_unit, product_sort_code, product_brand, product_source, slave_file, memo, stock_price,
      sale_price, stock_price_date, sale_price_date,amount,brand_code_history,compare_brand_code
    from t_product_tools_infor
    <isParameterPresent>
      <include refid="t_product_tools_infor.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
      <isNotEmpty property="startIndex" >
        limit $startIndex$,$pageSize$
    </isNotEmpty>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TProductToolsInfor" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    select id, product_sort_id, parent_id, leaf, brand_code, product_code, product_name,
      product_unit, product_sort_code, product_brand, product_source, slave_file, memo, stock_price,
      sale_price, stock_price_date, sale_price_date,amount,brand_code_history,compare_brand_code
    from t_product_tools_infor
    where id = #id:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TProductToolsInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    delete from t_product_tools_infor
    where id = #id:VARCHAR#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.tl.resource.dao.pojo.TProductToolsInforExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    delete from t_product_tools_infor
    <include refid="t_product_tools_infor.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.tl.resource.dao.pojo.TProductToolsInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    insert into t_product_tools_infor (id, product_sort_id, parent_id, leaf, brand_code,
      product_code, product_name, product_unit, product_sort_code, product_brand, product_source,
      slave_file, memo, stock_price, sale_price, stock_price_date, sale_price_date,amount,brand_code_history,
      compare_brand_code)
    values (#id:VARCHAR#, #productSortId:VARCHAR#, #parentId:VARCHAR#, #leaf:DECIMAL#,
      #brandCode:VARCHAR#, #productCode:VARCHAR#, #productName:VARCHAR#, #productUnit:VARCHAR#,
      #productSortCode:VARCHAR#, #productBrand:VARCHAR#, #productSource:VARCHAR#,
      #slaveFile:VARCHAR#, #memo:VARCHAR#, #stockPrice:DECIMAL#, #salePrice:DECIMAL#,
      #stockPriceDate:TIMESTAMP#, #salePriceDate:TIMESTAMP#,#amount:DECIMAL#,#brandCodeHistory:VARCHAR#,
      #compareBrandCode:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.tl.resource.dao.pojo.TProductToolsInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    insert into t_product_tools_infor
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        id
      </isNotNull>
      <isNotNull prepend="," property="productSortId">
        product_sort_id
      </isNotNull>
      <isNotNull prepend="," property="parentId">
        parent_id
      </isNotNull>
      <isNotNull prepend="," property="leaf">
        leaf
      </isNotNull>
      <isNotNull prepend="," property="brandCode">
        brand_code
      </isNotNull>
      <isNotNull prepend="," property="productCode">
        product_code
      </isNotNull>
      <isNotNull prepend="," property="productName">
        product_name
      </isNotNull>
      <isNotNull prepend="," property="productUnit">
        product_unit
      </isNotNull>
      <isNotNull prepend="," property="productSortCode">
        product_sort_code
      </isNotNull>
      <isNotNull prepend="," property="productBrand">
        product_brand
      </isNotNull>
      <isNotNull prepend="," property="productSource">
        product_source
      </isNotNull>
      <isNotNull prepend="," property="slaveFile">
        slave_file
      </isNotNull>
      <isNotNull prepend="," property="memo">
        memo
      </isNotNull>
      <isNotNull prepend="," property="stockPrice">
        stock_price
      </isNotNull>
      <isNotNull prepend="," property="salePrice">
        sale_price
      </isNotNull>
      <isNotNull prepend="," property="stockPriceDate">
        stock_price_date
      </isNotNull>
      <isNotNull prepend="," property="salePriceDate">
        sale_price_date
      </isNotNull>
      
      <isNotNull prepend="," property="amount">
        amount
      </isNotNull>
      
      <isNotNull prepend="," property="brandCodeHistory">
        brand_code_history
      </isNotNull>
      
      <isNotNull prepend="," property="compareBrandCode">
        compare_brand_code
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        #id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productSortId">
        #productSortId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="parentId">
        #parentId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="leaf">
        #leaf:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="brandCode">
        #brandCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productCode">
        #productCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productName">
        #productName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productUnit">
        #productUnit:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productSortCode">
        #productSortCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productBrand">
        #productBrand:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productSource">
        #productSource:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="slaveFile">
        #slaveFile:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="memo">
        #memo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="stockPrice">
        #stockPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="salePrice">
        #salePrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="stockPriceDate">
        #stockPriceDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="salePriceDate">
        #salePriceDate:TIMESTAMP#
      </isNotNull>
      
      <isNotNull prepend="," property="amount">
        #amount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="brandCodeHistory">
        #brandCodeHistory:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="compareBrandCode">
        #compareBrandCode:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  
  <!-- 查询是否存在当前产品信息 -->
  <select id="checkProToolsIsHaving" parameterClass="java.util.Map" resultClass="java.util.List" resultMap="ibatorgenerated_BaseResultMap" >
      select t.* 
      from t_product_tools_infor t 
      	where  replace(t.brand_code," ","")=replace(#brandCode#," ","") 
           and t.product_brand=#productBrand# 
  </select>
  
  <select id="checkProsToolsBrandCode" parameterClass="java.util.Map" resultClass="java.util.HashMap">
      select t.brand_code 
      from t_product_tools_infor t 
      	where  replace(t.brand_code," ","") 
      	in 
      	<iterate property="brandCode" open="(" close=")" conjunction=",">  
                    #brandCode[]#  
        </iterate>   
           and t.product_brand=#productBrand# 
  </select>
  
  <select id="ibatorgenerated_countByExample" parameterClass="com.tl.resource.dao.pojo.TProductToolsInforExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    select count(*) from t_product_tools_infor
    <include refid="t_product_tools_infor.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    update t_product_tools_infor
    <dynamic prepend="set">
      <isNotNull prepend="," property="record.id">
        id = #record.id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productSortId">
        product_sort_id = #record.productSortId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.parentId">
        parent_id = #record.parentId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.leaf">
        leaf = #record.leaf:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.brandCode">
        brand_code = #record.brandCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productCode">
        product_code = #record.productCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productName">
        product_name = #record.productName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productUnit">
        product_unit = #record.productUnit:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productSortCode">
        product_sort_code = #record.productSortCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productBrand">
        product_brand = #record.productBrand:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productSource">
        product_source = #record.productSource:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.slaveFile">
        slave_file = #record.slaveFile:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.memo">
        memo = #record.memo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.stockPrice">
        stock_price = #record.stockPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.salePrice">
        sale_price = #record.salePrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.stockPriceDate">
        stock_price_date = #record.stockPriceDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.salePriceDate">
        sale_price_date = #record.salePriceDate:TIMESTAMP#
      </isNotNull>
      
      <isNotNull prepend="," property="record.amount">
        amount = #record.amount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.brandCodeHistory">
        brand_code_history = #record.brandCodeHistory:VARCHAR#
      </isNotNull>
      
      <isNotNull prepend="," property="record.compareBrandCode">
        compare_brand_code = #record.compareBrandCode:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent>
      <include refid="t_product_tools_infor.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    update t_product_tools_infor
    set id = #record.id:VARCHAR#,
      product_sort_id = #record.productSortId:VARCHAR#,
      parent_id = #record.parentId:VARCHAR#,
      leaf = #record.leaf:DECIMAL#,
      brand_code = #record.brandCode:VARCHAR#,
      product_code = #record.productCode:VARCHAR#,
      product_name = #record.productName:VARCHAR#,
      product_unit = #record.productUnit:VARCHAR#,
      product_sort_code = #record.productSortCode:VARCHAR#,
      product_brand = #record.productBrand:VARCHAR#,
      product_source = #record.productSource:VARCHAR#,
      slave_file = #record.slaveFile:VARCHAR#,
      memo = #record.memo:VARCHAR#,
      stock_price = #record.stockPrice:DECIMAL#,
      sale_price = #record.salePrice:DECIMAL#,
      stock_price_date = #record.stockPriceDate:TIMESTAMP#,
      sale_price_date = #record.salePriceDate:TIMESTAMP#,
      
      amount = #record.amount:DECIMAL#,
      brand_code_history = #record.brandCodeHistory:VARCHAR#,
      compare_brand_code = #record.compareBrandCode:VARCHAR#
    <isParameterPresent>
      <include refid="t_product_tools_infor.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="updateProToolsByIdSelective" parameterClass="com.tl.resource.dao.pojo.TProductToolsInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    update t_product_tools_infor
    <dynamic prepend="set">
      <isNotNull prepend="," property="productSortId">
        product_sort_id = #productSortId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="parentId">
        parent_id = #parentId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="leaf">
        leaf = #leaf:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="brandCode">
        brand_code = #brandCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productCode">
        product_code = #productCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productName">
        product_name = #productName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productUnit">
        product_unit = #productUnit:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productSortCode">
        product_sort_code = #productSortCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productBrand">
        product_brand = #productBrand:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productSource">
        product_source = #productSource:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="slaveFile">
        slave_file = #slaveFile:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="memo">
        memo = #memo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="stockPrice">
        stock_price = #stockPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="salePrice">
        sale_price = #salePrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="stockPriceDate">
        stock_price_date = #stockPriceDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="salePriceDate">
        sale_price_date = #salePriceDate:TIMESTAMP#
      </isNotNull>
      
      <isNotNull prepend="," property="amount">
        amount = #amount:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="brandCodeHistory">
        brand_code_history = #brandCodeHistory:VARCHAR#
      </isNotNull>
      
      <isNotNull prepend="," property="compareBrandCode">
        compare_brand_code = #compareBrandCode:VARCHAR#
      </isNotNull>
    </dynamic>
    where id = #id:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TProductToolsInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Oct 11 08:15:53 CST 2009.
    -->
    update t_product_tools_infor
    set product_sort_id = #productSortId:VARCHAR#,
      parent_id = #parentId:VARCHAR#,
      leaf = #leaf:DECIMAL#,
      brand_code = #brandCode:VARCHAR#,
      product_code = #productCode:VARCHAR#,
      product_name = #productName:VARCHAR#,
      product_unit = #productUnit:VARCHAR#,
      product_sort_code = #productSortCode:VARCHAR#,
      product_brand = #productBrand:VARCHAR#,
      product_source = #productSource:VARCHAR#,
      slave_file = #slaveFile:VARCHAR#,
      memo = #memo:VARCHAR#,
      stock_price = #stockPrice:DECIMAL#,
      sale_price = #salePrice:DECIMAL#,
      stock_price_date = #stockPriceDate:TIMESTAMP#,
      sale_price_date = #salePriceDate:TIMESTAMP#,
      
      amount = #amount:DECIMAL#,
      brand_code_history = #brandCodeHistory:VARCHAR#,
      
      compare_brand_code = #compareBrandCode:VARCHAR#
    where id = #id:VARCHAR#
  </update>
  <procedure id="sycNotStandardToolsInfor" parameterClass="String">
       { call syc_not_standard_tools_infor(#value#) } 
  </procedure>
</sqlMap>