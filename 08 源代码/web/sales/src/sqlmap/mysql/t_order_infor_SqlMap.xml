<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="t_order_infor">
  <typeAlias alias="orderInforDto" type="com.tl.resource.business.dto.OrderInfoDto"/>
  
  <resultMap class="com.tl.resource.dao.pojo.TOrderInfor" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    <result column="id" jdbcType="VARCHAR" property="id" />
    <result column="order_code" jdbcType="VARCHAR" property="orderCode" />
    <result column="contract_code" jdbcType="VARCHAR" property="contractCode" />
    <result column="currency_name" jdbcType="VARCHAR" property="currencyName" />
    <result column="order_date" jdbcType="VARCHAR" property="orderDate" />
    <result column="order_type" jdbcType="INTEGER" property="orderType" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="supplier_name" jdbcType="VARCHAR" property="supplierName" />
    <result column="supplier_id" jdbcType="VARCHAR" property="supplierId" />
    <result column="urgent_level" jdbcType="DECIMAL" property="urgentLevel" />
    <result column="contact_person" jdbcType="VARCHAR" property="contactPerson" />
    <result column="total_money" jdbcType="DECIMAL" property="totalMoney" />
    <result column="tax_rate" jdbcType="DECIMAL" property="taxRate" />
    <result column="product_money" jdbcType="DECIMAL" property="productMoney" />
    <result column="delivery_date" jdbcType="VARCHAR" property="deliveryDate" />
    <result column="mome" jdbcType="VARCHAR" property="mome" />
    <result column="edit_date" jdbcType="TIMESTAMP" property="editDate" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="user_name" jdbcType="VARCHAR" property="userName" />
    <result column="currency_id" jdbcType="VARCHAR" property="currencyId" />
    <result column="overall_rebate" jdbcType="DECIMAL" property="overallRebate" />
    <result column="final_money" jdbcType="DECIMAL" property="finalMoney" />
    <result column="own_contact_person" jdbcType="VARCHAR" property="ownContactPerson" />
    <result column="customer_code" jdbcType="VARCHAR" property="customerCode" />
    <result column="customer_name" jdbcType="VARCHAR" property="customerName" />
    <result column="supplier_own_contact_person" jdbcType="VARCHAR" property="supplierOwnContactPerson" />
    <result column="company_name" jdbcType="VARCHAR" property="companyName"/>
    <result column="company_id" jdbcType="VARCHAR" property="companyId"/>
	<result column="supplier_contact_person" jdbcType="VARCHAR" property="supplierContactPerson"/>
	<result column="supplier_phone" jdbcType="VARCHAR" property="supplierPhone"/>
	<result column="supplier_fax" jdbcType="VARCHAR" property="supplierFax"/>
	<result column="quality_standard" jdbcType="VARCHAR" property="qualityStandard"/>
	<result column="delivery_address_type" jdbcType="VARCHAR" property="deliveryAddressType"/>
	<result column="traffic_mode" jdbcType="VARCHAR" property="trafficMode"/>
	<result column="closing_account_mode_id" jdbcType="DECIMAL" property="closingAccountModeId"/>
	<result column="closing_account_mode" jdbcType="VARCHAR" property="closingAccountMode"/>
	<result column="other_convention" jdbcType="VARCHAR" property="otherConvention"/>
	<result column="default_duty" jdbcType="VARCHAR" property="defaultDuty"/>
	<result column="effect_conditions" jdbcType="VARCHAR" property="effectConditions"/>
	<result column="file_count" jdbcType="INETGER" property="fileCount"/>
	<result column="quotation_id" jdbcType="VARCHAR" property="quotationId"/>
	<result column="quotation_code" jdbcType="VARCHAR" property="quotationCode"/>
	
  </resultMap>
   <resultMap class="com.tl.resource.dao.pojo.TOrderInfor" id="list" extends="ibatorgenerated_BaseResultMap">
  <result property="contractMoney" column="contract_money" jdbcType="VARCHAR"/>
  </resultMap>
  <resultMap id="result" class="orderInforDto" extends="ibatorgenerated_BaseResultMap">
     <result property="phone" column="phone" jdbcType="VARCHAR"/>
     <result property="fax" column="fax" jdbcType="VARCHAR"/>
     <result property="companyPhone" column="company_phone" jdbcType="VARCHAR"/>
     <result property="companyFax" column="company_fax" jdbcType="VARCHAR"/>
     <result property="taxMoney" column="tax_money" jdbcType="DECIMAL"/>
     <result property="deliveryAddress" column="delivery_address" jdbcType="VARCHAR"/>
     <result property="deliveryAddress" column="delivery_address" jdbcType="VARCHAR"/>
      
  </resultMap>
  <resultMap class="com.tl.resource.dao.pojo.TOrderInfor" id="orCon">
  	 <result column="id" jdbcType="VARCHAR" property="id" />
    <result column="order_code" jdbcType="VARCHAR" property="orderCode" />
    <result column="contract_code" jdbcType="VARCHAR" property="contractCode" />
  </resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" parameterClass="com.tl.resource.dao.pojo.TOrderInforExample" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    select id, order_code, contract_code,currency_id, currency_name, order_date, order_type, status,
      supplier_name, supplier_id, urgent_level, contact_person, total_money, tax_rate,
      product_money, delivery_date, mome, edit_date, user_id, user_name ,overall_rebate,final_money,own_contact_person,customer_code,customer_name,supplier_own_contact_person,
	company_name,company_id,supplier_contact_person,supplier_phone,supplier_fax,quality_standard,delivery_address_type,traffic_mode,closing_account_mode_id,closing_account_mode,
	other_convention,default_duty,effect_conditions,0 file_count,quotation_id,quotation_code
    from t_order_infor
    <isParameterPresent>
      <include refid="t_order_infor.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  
  
  <!-- 根据条件查找订单列表 -->
   <select id="getOrderList" parameterClass="java.util.Map" resultClass="java.util.List" resultMap="list">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
	 SELECT aa.*,(SELECT COUNT(*) FROM t_accessories ac WHERE ac.business_id = aa.id) file_count FROM (
SELECT oi.id, oi.order_code, oi.contract_code,oi.currency_id, oi.currency_name, oi.order_date, oi.order_type, oi.status,
      oi.supplier_name, oi.supplier_id, oi.urgent_level, oi.contact_person,  oi.tax_rate,
      oi.product_money, oi.delivery_date, oi.mome, oi.edit_date, oi.user_id, oi.user_name,oi.overall_rebate,oi.total_money,oi.final_money,tc.final_money contract_money,
      oi.own_contact_person,oi.customer_code,oi.customer_name,oi.supplier_own_contact_person,oi.company_name,oi.company_id
	  ,supplier_contact_person,supplier_phone,supplier_fax,quality_standard,oi.delivery_address_type,oi.traffic_mode,
	  oi.closing_account_mode_id,oi.closing_account_mode,
	oi.other_convention,oi.default_duty,oi.effect_conditions,oi.quotation_id,oi.quotation_code,oi.si_own_contact_person_id 
    FROM (SELECT oi2.*,si.own_contact_person_id si_own_contact_person_id FROM t_order_infor oi2,t_suppliers_infor si
	  WHERE oi2.supplier_id = si.id AND oi2.order_type in( $orderType$) ) oi 
 <!--     LEFT JOIN 
    (
        SELECT trp2.id,trp2.target_user_id FROM 
	t_resource_purview trp2 WHERE trp2.user_id = '$userId$' AND trp2.resource_type = 3
     ) trp
    ON oi.user_id =  trp.target_user_id -->
     LEFT JOIN t_contract_infor tc 
    ON oi.contract_code =  tc.contract_code
) aa WHERE (aa.si_own_contact_person_id = '$userId$' OR aa.user_id IS NOT NULL)
     <isNotEmpty property="orderCode" prepend="and">
      <![CDATA[ aa.order_code like '%$orderCode$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="contractCode" prepend="and">
      <![CDATA[ aa.contract_code like '%$contractCode$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="quotationCode" prepend="and">
      <![CDATA[ aa.quotation_code like '%$quotationCode$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="supplierName" prepend="and">
      <![CDATA[ aa.supplier_name like '%$supplierName$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="status" prepend="and">
      <![CDATA[ aa.status = $status$ ]]>
    </isNotEmpty>
     <isNotEmpty property="ownContactPerson" prepend="and">
      <![CDATA[ aa.own_contact_person like '%$ownContactPerson$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="supplierOwnContactPerson" prepend="and">
      <![CDATA[ aa.supplier_own_contact_person like '%$supplierOwnContactPerson$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="userName" prepend="and">
      <![CDATA[ aa.user_name like '$userName$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="customerName" prepend="and">
      <![CDATA[ aa.customer_name like '%$customerName$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="startTime" prepend="and">
      <![CDATA[ DATE_FORMAT(aa.edit_date,'%Y-%m-%d') >= '$startTime$' ]]>
    </isNotEmpty>
    <isNotEmpty property="endTime" prepend="and">
      <![CDATA[ DATE_FORMAT(aa.edit_date,'%Y-%m-%d') <= '$endTime$' ]]>
    </isNotEmpty>
    <isNotEmpty property="sort" >
        <![CDATA[
          order by $sort$ $dir$
        ]]>
      </isNotEmpty>
      <isEmpty property="sort" >
        <![CDATA[
           order by aa.edit_date DESC 
        ]]>
      </isEmpty>
    <isNotEmpty property="startIndex" prepend="">
    limit $startIndex$,$pageSize$
    </isNotEmpty>
  </select>
  
  <!-- 查询订单表中的合同编号和订单编号 -->
   <select id="getOrderContract" parameterClass="java.util.Map" resultClass="java.util.List" resultMap="orCon">
	 SELECT aa.id,aa.order_code,aa.contract_code FROM t_order_infor aa
  </select>
  
     <!-- 根据条件查找订单列表总数 -->
  <select id="getOrderTotalBySearch" parameterClass="java.util.Map" resultClass="java.lang.Integer">    
     select count(*) from 
( SELECT aa.*,(SELECT COUNT(*) FROM t_accessories ac WHERE ac.business_id = aa.id) file_count FROM (
SELECT oi.id, oi.order_code, oi.contract_code,oi.currency_id, oi.currency_name, oi.order_date, oi.order_type, oi.status,
      oi.supplier_name, oi.supplier_id, oi.urgent_level, oi.contact_person, oi.total_money, oi.tax_rate,
      oi.product_money, oi.delivery_date, oi.mome, oi.edit_date, oi.user_id, oi.user_name,oi.overall_rebate,oi.final_money,
      oi.own_contact_person,oi.customer_code,oi.customer_name,oi.supplier_own_contact_person,oi.company_name,oi.company_id
	  ,supplier_contact_person,supplier_phone,supplier_fax,quality_standard,delivery_address_type,traffic_mode,
	  closing_account_mode_id,closing_account_mode,
	other_convention,default_duty,effect_conditions,quotation_id,quotation_code,oi.si_own_contact_person_id 
    FROM (SELECT oi2.*,si.own_contact_person_id si_own_contact_person_id FROM t_order_infor oi2,t_suppliers_infor si
	  WHERE oi2.supplier_id = si.id AND oi2.order_type in ($orderType$) ) oi 
  <!--    LEFT JOIN 
    (
        SELECT trp2.id,trp2.target_user_id FROM 
	t_resource_purview trp2 WHERE trp2.user_id = '$userId$' AND trp2.resource_type = 3
     ) trp
    ON oi.user_id =  trp.target_user_id -->
) aa WHERE aa.si_own_contact_person_id = '$userId$' OR aa.user_id IS NOT NULL)d where 1=1
    <isNotEmpty property="orderCode" prepend="and">
      <![CDATA[ d.order_code like '%$orderCode$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="contractCode" prepend="and">
      <![CDATA[ d.contract_code like '%$contractCode$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="supplierName" prepend="and">
      <![CDATA[ d.supplier_name like '%$supplierName$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="status" prepend="and">
      <![CDATA[ d.status = '$status$' ]]>
    </isNotEmpty>
    <isNotEmpty property="ownContactPerson" prepend="and">
      <![CDATA[ d.own_contact_person like '%$ownContactPerson$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="customerName" prepend="and">
      <![CDATA[ d.customer_name like '%$customerName$%' ]]>
    </isNotEmpty>
    <isNotEmpty property="supplierOwnContactPerson" prepend="and">
      <![CDATA[ d.supplier_own_contact_person like '%$supplierOwnContactPerson$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="userName" prepend="and">
      <![CDATA[ d.user_name like '$userName$%' ]]>
    </isNotEmpty>
     <isNotEmpty property="startTime" prepend="and">
      <![CDATA[ DATE_FORMAT(d.edit_date,'%Y-%m-%d') >= '$startTime$' ]]>
    </isNotEmpty>
     <isNotEmpty property="endTime" prepend="and">
      <![CDATA[ DATE_FORMAT(d.edit_date,'%Y-%m-%d')  <= '$endTime$' ]]>
    </isNotEmpty>
  </select>
  
  <select id="getOrderMoneysTotalBySearch" parameterClass="java.util.Map" resultClass="java.util.HashMap">
  SELECT ROUND(IFNULL(SUM(dd.final_money),0),2) final_money,ROUND(IFNULL(SUM(dd.money),0),2) money,ROUND(IFNULL(SUM(dd.imoney),0),2) imoney 
FROM (
	SELECT bb.id,bb.final_money * bb.rate final_money,bb.money * bb.rate money,IFNULL(cc.imoney,0) * bb.rate imoney FROM (
	   SELECT ot.*,IFNULL(aa.money,0) money FROM 
	   (
			SELECT oi.id,oi.final_money,r.rate 
			FROM t_order_infor oi,t_resource_purview rp,t_exchange_rate r
			WHERE oi.order_type = #orderType#
			    AND oi.user_id = rp.target_user_id     
			    AND oi.currency_id = r.id
				 AND rp.user_id =  #userId#
				 AND rp.resource_type = 3  
				 <isNotEmpty property="orderCode" prepend="and">
			      <![CDATA[ oi.order_code LIKE '%$orderCode$%' ]]>
			    </isNotEmpty>
			    <isNotEmpty property="contractCode" prepend="and">
			      <![CDATA[ oi.contract_code LIKE '%$contractCode$%' ]]>
			    </isNotEmpty>
			    <isNotEmpty property="supplierName" prepend="and">
			      <![CDATA[ oi.supplier_name LIKE '%$supplierName$%' ]]>
			    </isNotEmpty>
			    <isNotEmpty property="status" prepend="and">
			      <![CDATA[ oi.status = '$status$' ]]>
			    </isNotEmpty>
			    <isNotEmpty property="ownContactPerson" prepend="and">
			      <![CDATA[ oi.own_contact_person LIKE '%$ownContactPerson$%' ]]>
			    </isNotEmpty>
			    <isNotEmpty property="customerName" prepend="and">
			    <![CDATA[ oi.customer_name LIKE '%$customerName$%' ]]>
			    </isNotEmpty>
				<isNotEmpty property="supplierOwnContactPerson" prepend="and">
				<![CDATA[ oi.supplier_own_contact_person LIKE '%$supplierOwnContactPerson$%' ]]>
				</isNotEmpty>
				<isNotEmpty property="startTime" prepend="and">
				<![CDATA[ DATE_FORMAT(oi.edit_date,'%Y-%m-%d') >= '$startTime$' ]]>
			    </isNotEmpty>
				<isNotEmpty property="endTime" prepend="and">
				<![CDATA[ DATE_FORMAT(oi.edit_date,'%Y-%m-%d')  <= '$endTime$' ]]>
				</isNotEmpty>  
			) ot LEFT JOIN 
			(
				SELECT cai.contract_infor_id,SUM(cai.money) money 
			FROM t_contract_accounts_infor cai 
			
			GROUP BY cai.contract_infor_id
		) aa
		ON ot.id = aa.contract_infor_id
	) bb LEFT JOIN (
		SELECT ii.contract_id,SUM(idt.money) imoney FROM t_invoice_info ii,t_invoice_detail idt
		WHERE ii.id = idt.invoice_info_id
		AND ii.invoice_type = 1
		GROUP BY contract_id
	) cc  ON bb.id = cc.contract_id
	)dd
	 </select>
	
	  
	  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TOrderInfor" resultMap="ibatorgenerated_BaseResultMap">
    select id, order_code, contract_code,currency_id, currency_name, order_date, order_type, status,
      supplier_name, supplier_id, urgent_level, contact_person, total_money, tax_rate,
      product_money, delivery_date, mome, edit_date, user_id, user_name,overall_rebate,final_money,own_contact_person,customer_code,customer_name,supplier_own_contact_person,
	  company_name,company_id,supplier_contact_person,supplier_phone,supplier_fax,quality_standard,delivery_address_type,traffic_mode,closing_account_mode_id,closing_account_mode,
	other_convention,default_duty,effect_conditions,0 file_count,quotation_id,quotation_code
    from t_order_infor
    where id = #id:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TOrderInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    delete from t_order_infor
    where id = #id:VARCHAR#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.tl.resource.dao.pojo.TOrderInforExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    delete from t_order_infor
    <include refid="t_order_infor.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.tl.resource.dao.pojo.TOrderInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    insert into t_order_infor (id, order_code, contract_code,currency_id, currency_name, order_date, order_type,
      status, supplier_name, supplier_id, urgent_level, contact_person, total_money, tax_rate,
      product_money, delivery_date, mome, edit_date, user_id, user_name,overall_rebate,final_money,own_contact_person,customer_code,customer_name,supplier_own_contact_person,
	  company_name,company_id,supplier_contact_person,supplier_phone,supplier_fax,quality_standard,delivery_address_type,traffic_mode,closing_account_mode_id,closing_account_mode,
	other_convention,default_duty,effect_conditions,quotation_id,quotation_code)
    values (#id:VARCHAR#, #orderCode:VARCHAR#, #contractCode:VARCHAR#,#currencyId:VARCHAR#, #currencyName:VARCHAR#,
      #orderDate:VARCHAR#, #orderType:INTEGER#, #status:INTEGER#, #supplierName:VARCHAR#,
      #supplierId:VARCHAR#, #urgentLevel:DECIMAL#, #contactPerson:VARCHAR#, #totalMoney:DECIMAL#,
      #taxRate:DECIMAL#, #productMoney:DECIMAL#, #deliveryDate:VARCHAR#, #mome:VARCHAR#,
      #editDate:TIMESTAMP#, #userId:VARCHAR#, #userName:VARCHAR#,#overallRebate:DECIMAL#,
      #finalMoney:DECIMAL#,#ownContactPerson:VARCHAR#,#customerCode:VARCHAR#,#customerName:VARCHAR#,#supplierOwnContactPerson:VARCHAR#,
	  #companyName:VARCHAR#,#companyId:VARCHAR#,#supplierContactPerson:VARCHAR#,#supplierPhone:VARCHAR#,#supplierFax:VARCHAR#,#qualityStandard:VARCHAR#,#deliveryAddressType:VARCHAR#
	  ,#trafficMode:VARCHAR#,#closingAccountModeId:VARCHAR#,#closingAccountMode:VARCHAR#,#otherConvention:VARCHAR#,#defaultDuty:VARCHAR#,#effectConditions:VARCHAR#
	  ,#quotationId:VARCHAR#,#quotationCode:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.tl.resource.dao.pojo.TOrderInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    insert into t_order_infor
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        id
      </isNotNull>
      <isNotNull prepend="," property="orderCode">
        order_code
      </isNotNull>
      <isNotNull prepend="," property="contractCode">
        contract_code
      </isNotNull>
      <isNotNull prepend="," property="currencyId">
        currency_id
      </isNotNull>
      <isNotNull prepend="," property="currencyName">
        currency_name
      </isNotNull>
      <isNotNull prepend="," property="orderDate">
        order_date
      </isNotNull>
      <isNotNull prepend="," property="orderType">
        order_type
      </isNotNull>
      <isNotNull prepend="," property="status">
        status
      </isNotNull>
      <isNotNull prepend="," property="supplierName">
        supplier_name
      </isNotNull>
      <isNotNull prepend="," property="supplierId">
        supplier_id
      </isNotNull>
      <isNotNull prepend="," property="urgentLevel">
        urgent_level
      </isNotNull>
      <isNotNull prepend="," property="contactPerson">
        contact_person
      </isNotNull>
      <isNotNull prepend="," property="totalMoney">
        total_money
      </isNotNull>
      <isNotNull prepend="," property="taxRate">
        tax_rate
      </isNotNull>
      <isNotNull prepend="," property="productMoney">
        product_money
      </isNotNull>
      <isNotNull prepend="," property="deliveryDate">
        delivery_date
      </isNotNull>
      <isNotNull prepend="," property="mome">
        mome
      </isNotNull>
      <isNotNull prepend="," property="editDate">
        edit_date
      </isNotNull>
      <isNotNull prepend="," property="userId">
        user_id
      </isNotNull>
       <isNotNull prepend="," property="userName">
        user_name
      </isNotNull>
      <isNotNull prepend="," property="overallRebate">
       overall_rebate
      </isNotNull>
       <isNotNull prepend="," property="finalMoney">
        final_money
      </isNotNull>
       <isNotNull prepend="," property="ownContactPerson">
        own_contact_person
      </isNotNull>
       <isNotNull prepend="," property="customerCode">
        customer_code
      </isNotNull>
       <isNotNull prepend="," property="customerName">
        customer_name
      </isNotNull>
      <isNotNull prepend="," property="supplierId">
        supplier_own_contact_person
      </isNotNull>
	  <isNotNull prepend="," property="companyName">
        company_name
      </isNotNull>
	  <isNotNull prepend="," property="companyName">
        company_id
      </isNotNull>
	   <isNotNull prepend="," property="supplierContactPerson">
        supplier_contact_person
      </isNotNull>
	  <isNotNull prepend="," property="supplierPhone">
        supplier_phone
      </isNotNull>
	  <isNotNull prepend="," property="supplierFax">
        supplier_fax
      </isNotNull>
	  <isNotNull prepend="," property="qualityStandard">
        quality_standard
      </isNotNull>
	  <isNotNull prepend="," property="deliveryAddressType">
        delivery_address_type
      </isNotNull>
	  <isNotNull prepend="," property="trafficMode">
        traffic_mode
      </isNotNull>
	  <isNotNull prepend="," property="closingAccountModeId">
        closing_account_mode_id
      </isNotNull>
	  <isNotNull prepend="," property="closingAccountMode">
        closing_account_mode
      </isNotNull>
	  <isNotNull prepend="," property="otherConvention">
        other_convention
      </isNotNull>
	  <isNotNull prepend="," property="defaultDuty">
        default_duty
      </isNotNull>
	  <isNotNull prepend="," property="effectConditions">
        effect_conditions
      </isNotNull>
      <isNotNull prepend="," property="quotationId">
        quotation_id
      </isNotNull>
      <isNotNull prepend="," property="quotationCode">
        quotation_code
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="id">
        #id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderCode">
        #orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contractCode">
        #contractCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currencyId">
        #currencyId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currencyId">
        (select currency_name from t_exchange_rate where id =  #currencyId:VARCHAR#)
      </isNotNull>
      <isNotNull prepend="," property="orderDate">
        #orderDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderType">
        #orderType:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="status">
        #status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="supplierId">
        (select supplier_name from t_suppliers_infor where id =  #supplierId:VARCHAR#)
      </isNotNull>
      <isNotNull prepend="," property="supplierId">
        #supplierId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="urgentLevel">
        #urgentLevel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="contactPerson">
        #contactPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="totalMoney">
        #totalMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="taxRate">
        #taxRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="productMoney">
        #productMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="deliveryDate">
        #deliveryDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mome">
        #mome:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="editDate">
        #editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        #userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userName">
        #userName:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="overallRebate">
        #overallRebate:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="finalMoney">
        #finalMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="ownContactPerson">
    	 #ownContactPerson:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="customerCode">
 		 #customerCode:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="customerName">
        #customerName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="supplierId">
        (select own_contact_person from t_suppliers_infor where id = #supplierId:VARCHAR#)
      </isNotNull>
	   <isNotNull prepend="," property="companyName">
        #companyName:VARCHAR#
      </isNotNull>
	   <isNotNull prepend="," property="companyName">
         (select id from t_company_infor where company_name = #companyName:VARCHAR#)
      </isNotNull>
	    <isNotNull prepend="," property="supplierContactPerson">
         #supplierContactPerson:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="supplierPhone">
         #supplierPhone:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="supplierFax">
         #supplierFax:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="qualityStandard">
         #qualityStandard:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="deliveryAddressType">
         #deliveryAddressType:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="trafficMode">
         #trafficMode:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="closingAccountModeId">
         #closingAccountModeId:DECIMAL#
      </isNotNull>
	  <isNotNull prepend="," property="closingAccountMode">
         #closingAccountMode:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="otherConvention">
         #otherConvention:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="defaultDuty">
         #defaultDuty:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="effectConditions">
         #effectConditions:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="quotationId">
       #quotationId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="quotationCode">
        #quotationCode:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.tl.resource.dao.pojo.TOrderInforExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    select count(*) from t_order_infor
    <include refid="t_order_infor.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    update t_order_infor
    <dynamic prepend="set">
      <isNotNull prepend="," property="record.id">
        id = #record.id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.orderCode">
        order_code = #record.orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.contractCode">
        contract_code = #record.contractCode:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="record.currencyId">
        currency_id = #record.currencyId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.currencyName">
        currency_name = #record.currencyName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.orderDate">
        order_date = #record.orderDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.orderType">
        order_type = #record.orderType:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.status">
        status = #record.status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.supplierName">
        supplier_name = (select supplier_name from t_suppliers_infor where id = #record.supplierId:VARCHAR#)
      </isNotNull>
      <isNotNull prepend="," property="record.supplierId">
        supplier_id = #record.supplierId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.urgentLevel">
        urgent_level = #record.urgentLevel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.contactPerson">
        contact_person = #record.contactPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.totalMoney">
        total_money = #record.totalMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.taxRate">
        tax_rate = #record.taxRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.productMoney">
        product_money = #record.productMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.deliveryDate">
        delivery_date = #record.deliveryDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.mome">
        mome = #record.mome:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.editDate">
        edit_date = #record.editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.userId">
        user_id = #record.userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.userName">
        user_name = #record.userName:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.overallRebate">
       overall_rebate = #record.overallRebate:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="record.finalMoney">
        final_money = #record.finalMoney:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="record.owContactPerson">
    	own_contact_person = #record.ownContactPerson:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="record.customerCode">
 		customer_code = #record.customerCode:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="record.customerName">
     	customer_name = #record.customerName:VARCHAR#
      </isNotNull>
	   <isNotNull prepend="," property="record.companyName">
     	company_name = #record.companyName:VARCHAR#
      </isNotNull>
	   <isNotNull prepend="," property="record.companyId">
     	company_id = #record.companyId:VARCHAR#
      </isNotNull>
	   <isNotNull prepend="," property="record.supplierContactPerson">
         supplier_contact_person = #record.supplierContactPerson:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.supplierPhone">
         supplier_phone = #record.supplierPhone:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.supplierFax">
        supplier_fax = #record.supplierFax:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.qualityStandard">
        quality_standard = #record.qualityStandard:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.deliveryAddressType">
        delivery_address_type = #record.deliveryAddressType:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.trafficMode">
        traffic_mode = #record.trafficMode:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.closingAccountModeId">
        closing_account_mode_id = #record.closingAccountModeId:DECIMAL#
      </isNotNull>
	  <isNotNull prepend="," property="record.closingAccountMode">
        closing_account_mode = #record.closingAccountMode:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.otherConvention">
        other_convention = #record.otherConvention:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.defaultDuty">
        default_duty = #record.defaultDuty:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="record.effectConditions">
        effect_conditions = #record.effectConditions:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="record.quotationId">
       quotation_id = #record.quotationId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.quotationCode">
        quotation_code = #record.quotationCode:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent>
      <include refid="t_order_infor.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    update t_order_infor
    set id = #record.id:VARCHAR#,
      order_code = #record.orderCode:VARCHAR#,
      contract_code = #record.contractCode:VARCHAR#,
      currency_id = #record.currencyId:VARCHAR#,
      currency_name = (select currency_name from t_exchange_rate where id = #record.currencyId:VARCHAR#),
      order_date = #record.orderDate:VARCHAR#,
      order_type = #record.orderType:INTEGER#,
      status = #record.status:INTEGER#,
      supplier_name = (select supplier_name from t_suppliers_infor where id = #record.supplierId:VARCHAR#),
      supplier_id = #record.supplierId:VARCHAR#,
      urgent_level = #record.urgentLevel:DECIMAL#,
      contact_person = #record.contactPerson:VARCHAR#,
      total_money = #record.totalMoney:DECIMAL#,
      tax_rate = #record.taxRate:DECIMAL#,
      product_money = #record.productMoney:DECIMAL#,
      delivery_date = #record.deliveryDate:VARCHAR#,
      mome = #record.mome:VARCHAR#,
      edit_date = #record.editDate:TIMESTAMP#,
      user_id = #record.userId:VARCHAR#,
      user_name = #record.userName:VARCHAR#,
      overall_rebate = #record.overallRebate:DECIMAL#,
      final_money = #record.finalMoney:DECIMAL#,
   	  own_contact_person = #record.ownContactPerson:VARCHAR#,
	  customer_code = #record.customerCode:VARCHAR#,
      customer_name = #record.customerName:VARCHAR#,
      company_name = #record.companyName:VARCHAR#,
      company_id = #record.companyId:VARCHAR#,
      supplier_contact_person = #record.supplierContactPerson:VARCHAR#,
      supplier_phone = #record.supplierPhone:VARCHAR#,
      supplier_fax = #record.supplierFax:VARCHAR#,
      quality_standard = #record.qualityStandard:VARCHAR#,
      delivery_address_type = #record.deliveryAddressType:VARCHAR#,
      traffic_mode = #record.trafficMode:VARCHAR#,
      closing_account_mode_id = #record.closingAccountModeId:DECIMAL#,
      closing_account_mode = #record.closingAccountMode:VARCHAR#,
      other_convention = #record.otherConvention:VARCHAR#,
      default_duty = #record.defaultDuty:VARCHAR#,
      effect_conditions = #record.effectConditions:VARCHAR#,
      quotation_id = #record.quotationId:VARCHAR#,
      quotation_code = #record.quotationCode:VARCHAR#
    <isParameterPresent>
      <include refid="t_order_infor.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.tl.resource.dao.pojo.TOrderInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    update t_order_infor
    <dynamic prepend="set">
      <isNotNull prepend="," property="orderCode">
        order_code = #orderCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="contractCode">
        contract_code = #contractCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currencyId">
        currency_id = #currencyId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currencyId">
        currency_name = (select currency_name from t_exchange_rate where id = #currencyId:VARCHAR#)
      </isNotNull>
      <isNotNull prepend="," property="orderDate">
        order_date = #orderDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orderType">
        order_type = #orderType:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="status">
        status = #status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="supplierId">
        supplier_name = (select supplier_name from t_suppliers_infor where id = #supplierId:VARCHAR#)
      </isNotNull>
      <isNotNull prepend="," property="supplierId">
        supplier_id = #supplierId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="urgentLevel">
        urgent_level = #urgentLevel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="contactPerson">
        contact_person = #contactPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="totalMoney">
        total_money = #totalMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="taxRate">
        tax_rate = #taxRate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="productMoney">
        product_money = #productMoney:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="deliveryDate">
        delivery_date = #deliveryDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mome">
        mome = #mome:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="editDate">
        edit_date = #editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="userId">
        user_id = #userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userName">
        user_name = #userName:VARCHAR#
      </isNotNull>
        <isNotNull prepend="," property="overallRebate">
       overall_rebate = #overallRebate:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="finalMoney">
        final_money = #finalMoney:DECIMAL#
      </isNotNull>
       <isNotNull prepend="," property="ownContactPerson">
    	own_contact_person = #ownContactPerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="customerCode">
 		customer_code = #customerCode:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="customerName">
     	customer_name = #customerName:VARCHAR#
      </isNotNull>
	   <isNotNull prepend="," property="companyName">
     	company_name = #companyName:VARCHAR#
      </isNotNull>
	   <isNotNull prepend="," property="companyName">
     	company_id = (select id from t_company_infor where company_name = #companyName:VARCHAR#)
      </isNotNull>
	  <isNotNull prepend="," property="supplierContactPerson">
        supplier_contact_person = #supplierContactPerson:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="supplierPhone">
       supplier_phone =  #supplierPhone:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="supplierFax">
       supplier_fax =  #supplierFax:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="qualityStandard">
       quality_standard =  #qualityStandard:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="deliveryAddressType">
       delivery_address_type =  #deliveryAddressType:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="trafficMode">
        traffic_mode =  #trafficMode:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="closingAccountModeId">
        closing_account_mode_id = #closingAccountModeId:DECIMAL#
      </isNotNull>
	  <isNotNull prepend="," property="closingAccountMode">
        closing_account_mode = #closingAccountMode:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="otherConvention">
       other_convention =  #otherConvention:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="defaultDuty">
       default_duty =  #defaultDuty:VARCHAR#
      </isNotNull>
	  <isNotNull prepend="," property="effectConditions">
       effect_conditions =  #effectConditions:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="quotationId">
      quotation_id = #quotationId:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="quotationCode">
       quotation_code = #quotationCode:VARCHAR#
      </isNotNull>
    </dynamic>
    where id = #id:VARCHAR#
  </update>
  
  <!-- 提交审批 -->
    <update id="submitAudit" parameterClass="java.lang.String">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    update t_order_infor
    <dynamic prepend="set">
        status = 1
    </dynamic>
    where id = #id:VARCHAR#
  </update>
  
    <!-- 审批通过 -->
    <update id="endAudit" parameterClass="java.lang.String">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    update t_order_infor
    <dynamic prepend="set">
        status = 2
    </dynamic>
    where id = #id:VARCHAR#
  </update>
  
    <!-- 审批退回 -->
    <update id="cancelAudit" parameterClass="java.lang.String">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    update t_order_infor
    <dynamic prepend="set">
        status = 3
    </dynamic>
    where id = #id:VARCHAR#
  </update>
  
  
  
  
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TOrderInfor">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Mon Oct 19 19:42:13 CST 2009.
    -->
    update t_order_infor
    set order_code = #orderCode:VARCHAR#,
      contract_code = #contractCode:VARCHAR#,
       currency_id = #currencyId:VARCHAR#,
      currency_name = (select currency_name from t_exchange_rate where id = #currencyId:VARCHAR#),
      order_date = #orderDate:VARCHAR#,
      order_type = #orderType:INTEGER#,
      status = #status:INTEGER#,
      supplier_name = (select supplier_name from t_suppliers_infor where id = #supplierId:VARCHAR#),
      supplier_id = #supplierId:VARCHAR#,
      urgent_level = #urgentLevel:DECIMAL#,
      contact_person = #contactPerson:VARCHAR#,
      total_money = #totalMoney:DECIMAL#,
      tax_rate = #taxRate:DECIMAL#,
      product_money = #productMoney:DECIMAL#,
      delivery_date = #deliveryDate:VARCHAR#,
      mome = #mome:VARCHAR#,
      edit_date = #editDate:TIMESTAMP#,
      user_id = #userId:VARCHAR#,
      user_name = #userName:VARCHAR#,
      overall_rebate = #overallRebate:DECIMAL#,
      final_money = #finalMoney:DECIMAL#,
      own_contact_person = #ownContactPerson:VARCHAR#,
 	  customer_code = #customerCode:VARCHAR#,
      customer_name = #customerName:VARCHAR#,
      company_name = #companyName:VARCHAR#,
      company_id = #companyId:VARCHAR#,
      supplier_contact_person = #supplierContactPerson:VARCHAR#,
      supplier_phone = #supplierPhone:VARCHAR#,
      supplier_fax = #supplierFax:VARCHAR#,
      quality_standard = #qualityStandard:VARCHAR#,
      delivery_address_type = #deliveryAddressType:VARCHAR#,
      traffic_mode = #trafficMode:VARCHAR#,
      closing_account_mode_id = #closingAccountModeId:DECIMAL#,
      closing_account_mode = #closingAccountMode:VARCHAR#,
      other_convention = #otherConvention:VARCHAR#,
      default_duty = #defaultDuty:VARCHAR#,
      effect_conditions = #effectConditions:VARCHAR#,
      quotation_id = #quotationId:VARCHAR#,
      quotation_code = #quotationCode:VARCHAR#
    where id = #id:VARCHAR#
  </update>
  <!-- excel 导出 -->
    <select id="getExcelOrderInfor" parameterClass="java.lang.String" resultMap="result">
    select mi.*,c.phone company_phone,c.fax company_fax from(
select t.id, t.order_code, t.contract_code,t.currency_id, t.currency_name,t.order_date, t.order_type, t.status,
      t.supplier_name, t.supplier_id, t.urgent_level, t.contact_person, t.total_money, t.tax_rate,
      t.product_money, t.delivery_date, t.mome, t.edit_date, t.user_id, t.user_name ,t.overall_rebate,
		t.final_money,t.own_contact_person,t.customer_code,t.customer_name,t.supplier_own_contact_person,t.company_name,t.company_id,
		t.supplier_contact_person,t.supplier_phone,t.supplier_fax,t.quality_standard,t.delivery_address_type,t.traffic_mode,t.closing_account_mode_id,t.closing_account_mode,
	t.other_convention,t.default_duty,t.effect_conditions,t.quotation_id,t.quotation_code,
		s.phone_first phone,s.fax_first fax,(t.total_money-t.product_money) tax_money,0 file_count,
		(select delivery_address_type from t_contract_infor where contract_code = t.contract_code) delivery_address
    from t_order_infor t,t_suppliers_infor s
    where t.supplier_id = s.id 
    and  t.id =  #id:VARCHAR#)mi
    left join t_company_infor c
    on c.id = mi.company_id
  </select>
</sqlMap>