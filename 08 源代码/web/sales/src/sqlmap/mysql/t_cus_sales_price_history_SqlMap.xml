<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="t_cus_sales_price_history" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.tl.resource.dao.pojo.TCusSalesPriceHistory" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    <result column="id" property="id" jdbcType="VARCHAR" />
    <result column="product_tool_infor_id" property="productToolInforId" jdbcType="VARCHAR" />
    <result column="parent_id" property="parentId" jdbcType="VARCHAR" />
    <result column="leaf" property="leaf" jdbcType="INTEGER" />
    <result column="customer_infor_id" property="customerInforId" jdbcType="VARCHAR" />
    <result column="product_code" property="productCode" jdbcType="VARCHAR" />
    <result column="history_price" property="historyPrice" jdbcType="DECIMAL" />
    <result column="rebate" property="rebate" jdbcType="DECIMAL" />
    <result column="net_price" property="netPrice" jdbcType="DECIMAL" />
    <result column="brand_code" property="brandCode" jdbcType="VARCHAR" />
    <result column="edit_date" property="editDate" jdbcType="TIMESTAMP" />
    <result column="user_id" property="userId" jdbcType="VARCHAR" />
    <result column="user_name" property="userName" jdbcType="VARCHAR" />
    <result column="sale_price_date" property="salePriceDate" jdbcType="TIMESTAMP" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="quotation_code" property="quotationCode" jdbcType="VARCHAR" />
  </resultMap>
  
  <resultMap id="resultMap" class="com.tl.resource.dao.pojo.TCusSalesPriceHistory" extends="ibatorgenerated_BaseResultMap">
    <result property="children" column="id" select="t_cus_sales_price_history.getChildren"/>
  </resultMap>
  
  <sql id="ibatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  
  <!-- 获取历史报价信息 -->
  <select id="getHistoryPrice" parameterClass="java.util.Map" resultClass="com.tl.resource.dao.pojo.TCusSalesPriceHistory" resultMap="resultMap">
     <![CDATA[
       select id, product_tool_infor_id, parent_id, leaf, customer_infor_id, product_code,
        history_price, rebate, net_price, brand_code, edit_date, user_id, user_name, sale_price_date,
        status, quotation_code
      from t_cus_sales_price_history t where t.product_tool_infor_id=#proId# and t.customer_infor_id=#customerId#
     ]]> 
  </select>
  
  <!-- 获取子结点信息 -->
  <select id="getChildren" parameterClass="java.lang.String" resultClass="com.tl.resource.dao.pojo.TCusSalesPriceHistory" resultMap="resultMap">
    <![CDATA[
       select id, product_tool_infor_id, parent_id, leaf, customer_infor_id, product_code,
        history_price, rebate, net_price, brand_code, edit_date, user_id, user_name, sale_price_date,
        status, quotation_code
      from t_cus_sales_price_history t where t.parent_id=#value#
     ]]>
  </select>
  
  <select id="ibatorgenerated_selectByExample" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistoryExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    select id, product_tool_infor_id, parent_id, leaf, customer_infor_id, product_code,
      history_price, rebate, net_price, brand_code, edit_date, user_id, user_name, sale_price_date,
      status, quotation_code
    from t_cus_sales_price_history
    <isParameterPresent >
      <include refid="t_cus_sales_price_history.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistory" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    select id, product_tool_infor_id, parent_id, leaf, customer_infor_id, product_code,
      history_price, rebate, net_price, brand_code, edit_date, user_id, user_name, sale_price_date,
      status, quotation_code
    from t_cus_sales_price_history
    where id = #id:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistory" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    delete from t_cus_sales_price_history
    where id = #id:VARCHAR#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistoryExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    delete from t_cus_sales_price_history
    <include refid="t_cus_sales_price_history.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistory" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    insert into t_cus_sales_price_history (id, product_tool_infor_id, parent_id, leaf,
      customer_infor_id, product_code, history_price, rebate, net_price, brand_code, edit_date,
      user_id, user_name, sale_price_date, status, quotation_code)
    values (#id:VARCHAR#, #productToolInforId:VARCHAR#, #parentId:VARCHAR#, #leaf:INTEGER#,
      #customerInforId:VARCHAR#, #productCode:VARCHAR#, #historyPrice:DECIMAL#, #rebate:DECIMAL#,
      #netPrice:DECIMAL#, #brandCode:VARCHAR#, #editDate:TIMESTAMP#, #userId:VARCHAR#,
      #userName:VARCHAR#, #salePriceDate:TIMESTAMP#, #status:INTEGER#, #quotationCode:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistory" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    insert into t_cus_sales_price_history
    <dynamic prepend="(" >
      <isNotNull prepend="," property="id" >
        id
      </isNotNull>
      <isNotNull prepend="," property="productToolInforId" >
        product_tool_infor_id
      </isNotNull>
      <isNotNull prepend="," property="parentId" >
        parent_id
      </isNotNull>
      <isNotNull prepend="," property="leaf" >
        leaf
      </isNotNull>
      <isNotNull prepend="," property="customerInforId" >
        customer_infor_id
      </isNotNull>
      <isNotNull prepend="," property="productCode" >
        product_code
      </isNotNull>
      <isNotNull prepend="," property="historyPrice" >
        history_price
      </isNotNull>
      <isNotNull prepend="," property="rebate" >
        rebate
      </isNotNull>
      <isNotNull prepend="," property="netPrice" >
        net_price
      </isNotNull>
      <isNotNull prepend="," property="brandCode" >
        brand_code
      </isNotNull>
      <isNotNull prepend="," property="editDate" >
        edit_date
      </isNotNull>
      <isNotNull prepend="," property="userId" >
        user_id
      </isNotNull>
      <isNotNull prepend="," property="userName" >
        user_name
      </isNotNull>
      <isNotNull prepend="," property="salePriceDate" >
        sale_price_date
      </isNotNull>
      <isNotNull prepend="," property="status" >
        status
      </isNotNull>
      <isNotNull prepend="," property="quotationCode" >
        quotation_code
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="id" >
        #id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productToolInforId" >
        #productToolInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="parentId" >
        #parentId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="leaf" >
        #leaf:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="customerInforId" >
        #customerInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productCode" >
        #productCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="historyPrice" >
        #historyPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="rebate" >
        #rebate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="netPrice" >
        #netPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="brandCode" >
        #brandCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="editDate" >
        #editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="userId" >
        #userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userName" >
        #userName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="salePriceDate" >
        #salePriceDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        #status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="quotationCode" >
        #quotationCode:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistoryExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    select count(*) from t_cus_sales_price_history
    <include refid="t_cus_sales_price_history.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    update t_cus_sales_price_history
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.id" >
        id = #record.id:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productToolInforId" >
        product_tool_infor_id = #record.productToolInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.parentId" >
        parent_id = #record.parentId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.leaf" >
        leaf = #record.leaf:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.customerInforId" >
        customer_infor_id = #record.customerInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.productCode" >
        product_code = #record.productCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.historyPrice" >
        history_price = #record.historyPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.rebate" >
        rebate = #record.rebate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.netPrice" >
        net_price = #record.netPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.brandCode" >
        brand_code = #record.brandCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.editDate" >
        edit_date = #record.editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.userId" >
        user_id = #record.userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.userName" >
        user_name = #record.userName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.salePriceDate" >
        sale_price_date = #record.salePriceDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.status" >
        status = #record.status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="record.quotationCode" >
        quotation_code = #record.quotationCode:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="t_cus_sales_price_history.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    update t_cus_sales_price_history
    set id = #record.id:VARCHAR#,
      product_tool_infor_id = #record.productToolInforId:VARCHAR#,
      parent_id = #record.parentId:VARCHAR#,
      leaf = #record.leaf:INTEGER#,
      customer_infor_id = #record.customerInforId:VARCHAR#,
      product_code = #record.productCode:VARCHAR#,
      history_price = #record.historyPrice:DECIMAL#,
      rebate = #record.rebate:DECIMAL#,
      net_price = #record.netPrice:DECIMAL#,
      brand_code = #record.brandCode:VARCHAR#,
      edit_date = #record.editDate:TIMESTAMP#,
      user_id = #record.userId:VARCHAR#,
      user_name = #record.userName:VARCHAR#,
      sale_price_date = #record.salePriceDate:TIMESTAMP#,
      status = #record.status:INTEGER#,
      quotation_code = #record.quotationCode:VARCHAR#
    <isParameterPresent >
      <include refid="t_cus_sales_price_history.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistory" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    update t_cus_sales_price_history
    <dynamic prepend="set" >
      <isNotNull prepend="," property="productToolInforId" >
        product_tool_infor_id = #productToolInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="parentId" >
        parent_id = #parentId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="leaf" >
        leaf = #leaf:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="customerInforId" >
        customer_infor_id = #customerInforId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="productCode" >
        product_code = #productCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="historyPrice" >
        history_price = #historyPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="rebate" >
        rebate = #rebate:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="netPrice" >
        net_price = #netPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="brandCode" >
        brand_code = #brandCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="editDate" >
        edit_date = #editDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="userId" >
        user_id = #userId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="userName" >
        user_name = #userName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="salePriceDate" >
        sale_price_date = #salePriceDate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        status = #status:INTEGER#
      </isNotNull>
      <isNotNull prepend="," property="quotationCode" >
        quotation_code = #quotationCode:VARCHAR#
      </isNotNull>
    </dynamic>
    where id = #id:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.tl.resource.dao.pojo.TCusSalesPriceHistory" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Oct 16 10:53:03 CST 2009.
    -->
    update t_cus_sales_price_history
    set product_tool_infor_id = #productToolInforId:VARCHAR#,
      parent_id = #parentId:VARCHAR#,
      leaf = #leaf:INTEGER#,
      customer_infor_id = #customerInforId:VARCHAR#,
      product_code = #productCode:VARCHAR#,
      history_price = #historyPrice:DECIMAL#,
      rebate = #rebate:DECIMAL#,
      net_price = #netPrice:DECIMAL#,
      brand_code = #brandCode:VARCHAR#,
      edit_date = #editDate:TIMESTAMP#,
      user_id = #userId:VARCHAR#,
      user_name = #userName:VARCHAR#,
      sale_price_date = #salePriceDate:TIMESTAMP#,
      status = #status:INTEGER#,
      quotation_code = #quotationCode:VARCHAR#
    where id = #id:VARCHAR#
  </update>
</sqlMap>